[2m2025-07-27T04:20:55.150810Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m pgsqlite v0.0.11
[2m2025-07-27T04:20:55.154756Z[0m [32m INFO[0m [2mpgsqlite::session::db_handler[0m[2m:[0m New database file detected, running initial migrations...
[2m2025-07-27T04:20:55.157320Z[0m [32m INFO[0m [2mpgsqlite::migration::runner[0m[2m:[0m Applying migration 1: Create initial pgsqlite system tables
[2m2025-07-27T04:20:55.157522Z[0m [32m INFO[0m [2mpgsqlite::migration::runner[0m[2m:[0m Migration 1 completed in 0ms
[2m2025-07-27T04:20:55.157549Z[0m [32m INFO[0m [2mpgsqlite::migration::runner[0m[2m:[0m Applying migration 2: Add PostgreSQL ENUM type support
[2m2025-07-27T04:20:55.157873Z[0m [32m INFO[0m [2mpgsqlite::migration::runner[0m[2m:[0m Migration 2 completed in 0ms
[2m2025-07-27T04:20:55.157897Z[0m [32m INFO[0m [2mpgsqlite::migration::runner[0m[2m:[0m Applying migration 3: Add datetime format and timezone metadata for PostgreSQL datetime types
[2m2025-07-27T04:20:55.158285Z[0m [32m INFO[0m [2mpgsqlite::migration::runner[0m[2m:[0m Migration 3 completed in 0ms
[2m2025-07-27T04:20:55.158307Z[0m [32m INFO[0m [2mpgsqlite::migration::runner[0m[2m:[0m Applying migration 4: Convert all datetime types to INTEGER storage using microseconds
[2m2025-07-27T04:20:55.158392Z[0m [32m INFO[0m [2mpgsqlite::migration::runner[0m[2m:[0m Migration 4 completed in 0ms
[2m2025-07-27T04:20:55.158411Z[0m [32m INFO[0m [2mpgsqlite::migration::runner[0m[2m:[0m Applying migration 5: Create PostgreSQL-compatible catalog tables and views for psql compatibility
[2m2025-07-27T04:20:55.169562Z[0m [32m INFO[0m [2mpgsqlite::migration::runner[0m[2m:[0m Migration 5 completed in 10ms
[2m2025-07-27T04:20:55.169596Z[0m [32m INFO[0m [2mpgsqlite::migration::runner[0m[2m:[0m Applying migration 6: Add support for VARCHAR/CHAR length constraints
[2m2025-07-27T04:20:55.170058Z[0m [32m INFO[0m [2mpgsqlite::migration::runner[0m[2m:[0m Migration 6 completed in 0ms
[2m2025-07-27T04:20:55.170082Z[0m [32m INFO[0m [2mpgsqlite::migration::runner[0m[2m:[0m Applying migration 7: Add support for NUMERIC/DECIMAL precision and scale constraints
[2m2025-07-27T04:20:55.170284Z[0m [32m INFO[0m [2mpgsqlite::migration::runner[0m[2m:[0m Migration 7 completed in 0ms
[2m2025-07-27T04:20:55.170305Z[0m [32m INFO[0m [2mpgsqlite::migration::runner[0m[2m:[0m Applying migration 8: Add support for PostgreSQL array types
[2m2025-07-27T04:20:55.170743Z[0m [32m INFO[0m [2mpgsqlite::migration::runner[0m[2m:[0m Migration 8 completed in 0ms
[2m2025-07-27T04:20:55.170767Z[0m [32m INFO[0m [2mpgsqlite::migration::runner[0m[2m:[0m Applying migration 9: Add PostgreSQL Full-Text Search support using FTS5
[2m2025-07-27T04:20:55.171885Z[0m [32m INFO[0m [2mpgsqlite::migration::runner[0m[2m:[0m Migration 9 completed in 0ms
[2m2025-07-27T04:20:55.171915Z[0m [32m INFO[0m [2mpgsqlite::session::db_handler[0m[2m:[0m Applied 9 migrations to new database
[2m2025-07-27T04:20:55.172016Z[0m [32m INFO[0m [2mpgsqlite::session::db_handler[0m[2m:[0m DbHandler initialized with mutex-based implementation
[2m2025-07-27T04:20:55.172160Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m Unix socket created at: /tmp/.s.PGSQL.5435
[2m2025-07-27T04:20:55.172189Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m TCP server listening on port 5435
[2m2025-07-27T04:20:55.172194Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m Using database: test_returning.db
[2m2025-07-27T04:20:55.172196Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m SSL disabled - using unencrypted connections
[2m2025-07-27T04:20:55.173463Z[0m [32m INFO[0m [2mpgsqlite::cache::status[0m[2m:[0m Query Cache Status - Total: 0, Hits: 0 (0.0%), Misses: 0, Evictions: 0, Size: 0/1000
[2m2025-07-27T04:21:04.438408Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m New TCP connection from 127.0.0.1:58414
[2m2025-07-27T04:21:04.438494Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m Handling TCP connection from 127.0.0.1:58414
[2m2025-07-27T04:21:04.438599Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m Rejected SSL request from 127.0.0.1:58414 (SSL disabled)
[2m2025-07-27T04:21:04.438658Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m Received startup message from 127.0.0.1:58414: StartupMessage { protocol_version: 196608, parameters: {"user": "postgres", "database": "main"} }
[2m2025-07-27T04:21:04.438781Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m Sent authentication and ready response to 127.0.0.1:58414
[2m2025-07-27T04:21:04.438864Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m Received query from 127.0.0.1:58414: BEGIN
[2m2025-07-27T04:21:04.442662Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m Executing BEGIN command
[2m2025-07-27T04:21:04.445987Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m BEGIN executed successfully
[2m2025-07-27T04:21:04.445997Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m Transaction status updated to InTransaction
[2m2025-07-27T04:21:04.446057Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m Received query from 127.0.0.1:58414: SELECT t.oid, typarray
FROM pg_type t JOIN pg_namespace ns
    ON typnamespace = ns.oid
WHERE typname = 'hstore';

[2m2025-07-27T04:21:04.446082Z[0m [32m INFO[0m [2mpgsqlite::catalog::query_interceptor[0m[2m:[0m Intercepting catalog query: SELECT t.oid, typarray
FROM pg_type t JOIN pg_namespace ns
    ON typnamespace = ns.oid
WHERE typname = 'hstore';
[2m2025-07-27T04:21:04.447801Z[0m [32m INFO[0m [2mpgsqlite::query::join_type_inference[0m[2m:[0m JOIN mapping: Built 3 mappings from query
[2m2025-07-27T04:21:04.447841Z[0m [32m INFO[0m [2mpgsqlite::cache::row_description[0m[2m:[0m Initializing RowDescription cache with capacity 1000 and TTL 10 minutes
[2m2025-07-27T04:21:04.450386Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m Received query from 127.0.0.1:58414: ROLLBACK
[2m2025-07-27T04:21:04.450828Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m Received query from 127.0.0.1:58414: BEGIN
[2m2025-07-27T04:21:04.450840Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m Executing BEGIN command
[2m2025-07-27T04:21:04.450847Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m BEGIN executed successfully
[2m2025-07-27T04:21:04.450851Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m Transaction status updated to InTransaction
[2m2025-07-27T04:21:04.450897Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m Received query from 127.0.0.1:58414: select pg_catalog.version()
[2m2025-07-27T04:21:04.451014Z[0m [32m INFO[0m [2mpgsqlite::catalog::query_interceptor[0m[2m:[0m Intercepting catalog query: select pg_catalog.version()
[2m2025-07-27T04:21:04.451686Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m Received query from 127.0.0.1:58414: select current_schema()
[2m2025-07-27T04:21:04.451946Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m Received query from 127.0.0.1:58414: show transaction isolation level
[2m2025-07-27T04:21:04.452669Z[0m [32m INFO[0m [2mpgsqlite::query::set_handler[0m[2m:[0m SHOW parameter: TRANSACTION ISOLATION LEVEL
[2m2025-07-27T04:21:04.452678Z[0m [32m INFO[0m [2mpgsqlite::query::set_handler[0m[2m:[0m Parameter TRANSACTION ISOLATION LEVEL = read committed
[2m2025-07-27T04:21:04.452842Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m Received query from 127.0.0.1:58414: show standard_conforming_strings
[2m2025-07-27T04:21:04.452852Z[0m [32m INFO[0m [2mpgsqlite::query::set_handler[0m[2m:[0m SHOW parameter: STANDARD_CONFORMING_STRINGS
[2m2025-07-27T04:21:04.452855Z[0m [32m INFO[0m [2mpgsqlite::query::set_handler[0m[2m:[0m Parameter STANDARD_CONFORMING_STRINGS = on
[2m2025-07-27T04:21:04.452941Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m Received query from 127.0.0.1:58414: ROLLBACK
[2m2025-07-27T04:21:04.455517Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m Received query from 127.0.0.1:58414: BEGIN
[2m2025-07-27T04:21:04.455533Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m Executing BEGIN command
[2m2025-07-27T04:21:04.455542Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m BEGIN executed successfully
[2m2025-07-27T04:21:04.455556Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m Transaction status updated to InTransaction
[2m2025-07-27T04:21:04.455602Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m Received query from 127.0.0.1:58414: SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = 'users' AND pg_catalog.pg_class.relkind = ANY (ARRAY['r', 'p', 'f', 'v', 'm']) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != 'pg_catalog'
[2m2025-07-27T04:21:04.470177Z[0m [32m INFO[0m [2mpgsqlite::catalog::query_interceptor[0m[2m:[0m Intercepting catalog query: SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = 'users' AND EXISTS (SELECT 1 FROM json_each('["r","p","f","v","m"]') WHERE value = pg_catalog.pg_class.relkind) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != 'pg_catalog'
[2m2025-07-27T04:21:04.472547Z[0m [32m INFO[0m [2mpgsqlite::query::join_type_inference[0m[2m:[0m JOIN mapping: Built 6 mappings from query
[2m2025-07-27T04:21:04.474546Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m Received query from 127.0.0.1:58414: 
CREATE TABLE users (
	id SERIAL NOT NULL, 
	username VARCHAR(50) NOT NULL, 
	email VARCHAR(100) NOT NULL, 
	full_name VARCHAR(100), 
	is_active BOOLEAN, 
	created_at TIMESTAMP WITHOUT TIME ZONE, 
	birth_date DATE, 
	PRIMARY KEY (id), 
	UNIQUE (username), 
	UNIQUE (email)
)


[2m2025-07-27T04:21:04.477348Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m Type mappings count: 7
[2m2025-07-27T04:21:04.477370Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m Successfully created/verified __pgsqlite_schema table
[2m2025-07-27T04:21:04.477423Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m Stored metadata: users.created_at -> TIMESTAMP WITHOUT TIME ZONE (INTEGER)
[2m2025-07-27T04:21:04.477440Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m Stored metadata: users.id -> SERIAL (INTEGER PRIMARY KEY AUTOINCREMENT)
[2m2025-07-27T04:21:04.477452Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m Stored metadata: users.is_active -> BOOLEAN (INTEGER)
[2m2025-07-27T04:21:04.477464Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m Stored metadata: users.birth_date -> DATE (INTEGER)
[2m2025-07-27T04:21:04.477475Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m Stored metadata: users.full_name -> VARCHAR(100) (TEXT)
[2m2025-07-27T04:21:04.477490Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m Stored string constraint: users.full_name max_length=100
[2m2025-07-27T04:21:04.477502Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m Stored metadata: users.username -> VARCHAR(50) (TEXT)
[2m2025-07-27T04:21:04.477516Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m Stored string constraint: users.username max_length=50
[2m2025-07-27T04:21:04.477528Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m Stored metadata: users.email -> VARCHAR(100) (TEXT)
[2m2025-07-27T04:21:04.477540Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m Stored string constraint: users.email max_length=100
[2m2025-07-27T04:21:04.477543Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m Stored type mappings for table users (simple query protocol)
[2m2025-07-27T04:21:04.477547Z[0m [32m INFO[0m [2mpgsqlite::catalog::constraint_populator[0m[2m:[0m Populating constraints for table: users
[2m2025-07-27T04:21:04.480468Z[0m [32m INFO[0m [2mpgsqlite::catalog::constraint_populator[0m[2m:[0m Successfully populated constraints for table: users
[2m2025-07-27T04:21:04.480479Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m Successfully populated constraint catalog tables for table: users
[2m2025-07-27T04:21:04.480648Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m Received query from 127.0.0.1:58414: COMMIT
[2m2025-07-27T04:21:04.480659Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m Executing COMMIT command
[2m2025-07-27T04:21:04.480808Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m COMMIT executed successfully
[2m2025-07-27T04:21:04.480812Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m Transaction status updated to Idle
[2m2025-07-27T04:21:04.482979Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m Received query from 127.0.0.1:58414: BEGIN
[2m2025-07-27T04:21:04.482992Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m Executing BEGIN command
[2m2025-07-27T04:21:04.482999Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m BEGIN executed successfully
[2m2025-07-27T04:21:04.483002Z[0m [32m INFO[0m [2mpgsqlite::query::executor[0m[2m:[0m Transaction status updated to InTransaction
[2m2025-07-27T04:21:04.483042Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m Received query from 127.0.0.1:58414: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.full_name AS users_full_name, users.is_active AS users_is_active, users.created_at AS users_created_at, users.birth_date AS users_birth_date 
FROM users 
WHERE users.username = 'transaction_test_user' 
 LIMIT 1
[2m2025-07-27T04:21:04.485289Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m Received query from 127.0.0.1:58414: INSERT INTO users (username, email, full_name, is_active, created_at, birth_date) VALUES ('transaction_test_user', 'test@transaction.com', 'Original Name', true, '2025-07-27T04:21:04.485158'::timestamp, NULL) RETURNING users.id
[2m2025-07-27T04:21:04.486240Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m Received query from 127.0.0.1:58414: ROLLBACK
[2m2025-07-27T04:21:04.504624Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m Client 127.0.0.1:58414 requested termination
[2m2025-07-27T04:21:04.504643Z[0m [32m INFO[0m [2mpgsqlite[0m[2m:[0m Connection from 127.0.0.1:58414 closed
